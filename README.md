# canvas-captcha
[![Build Status](https://travis-ci.org/Claude-Ray/canvas-captcha.svg?branch=master)](https://travis-ci.org/Claude-Ray/canvas-captcha)

基于[node-canvas](https://github.com/Automattic/node-canvas)，目前仅作示范，也可直接用于图片验证码产出。

> 项目不完善，因此未发布npm。建议直接引入`node-canvas`自行绘制验证码。

## Why
- 相比于`gm`的cli调用，基于C++实现的`node-canvas`有性能优势
- canvas标准绘图，对前端开发者更友好（~~也许并没有~~）
- 更好的扩展性

## Samples

- rjdx

  <img width="120" height="50" src="data:image/jpeg;base64,
  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
  " />

- hndd

  <img width="120" height="50" src="data:image/jpeg;base64,
  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
  " />

## Usage
原生方法暂时只支持jpeg base64格式输出。

```js
const captcha = new Captcha(120, 50, 4);

const {dataURL, text} = captcha.createCaptcha();
```

但支持自由组合，期间可对ctx任意调整，或附加更多操作。
```js
// captcha初始化
const captcha = new Captcha(120, 50, 4);

// canvasRenderingContext2D初始化
const { canvas, ctx } = captcha.getCanvas();
// 举例，对ctx附加操作
ctx.globalAlpha = 0.8;
// 绘制文字
const text = captcha.drawText(ctx);
// 干扰线
captcha.drawLine(ctx);
// 干扰点
captcha.drawPoint(ctx);

// captcha或canvas都可用于图片输出
const dataURL = captcha.toDataURL(canvas);
```
